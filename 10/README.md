# 第10章
・JACK言語のプログラムに対して「字句解析」「構文解析」を行うコンパイラを実装する  

### コンパイラの用語
・トークン：プログラムの意味をもつ最小単位。コンパイラへの入力単位  
・字句解析（トークナイザー・トークン化・スキャニング）：ソースコードから空白やコメントなどを取り除いて一連のトークンのあつまりに変換すること  
・文脈自由文法：ある言語の構成要素がより単純な要素からどのように構成されるかを指定したルールの集合  
・終端要素（ターミナル）：”識別子"，"数値"，"文字列"，"予約語"，"演算子"，"区切り記号”などのようにそれ以上細分化できない要素  
・非終端要素："文"，"宣言"，"関数定義"，"式"などのように文法に沿って細分化できる要素  
・再帰下降構文解析：全ての要素が終端要素に到達するまで、トークン列に対して再帰的に構文解析を行うこと  
・構文解析：一連のトークンを言語の構文ルールに適合させ、その構文構造を明らかにすること  
・コード生成：目的とする言語の構文を用いてプログラムを再構成すること  

### 文と式の違い
・式は値を返すが文は返さない  
・関数型言語の場合は文はなく式のみ  
・代入が文なのか式なのかは言語の仕様に依存  
・文の場合は一般に手続きを表すらしい...  
> ・手続き型言語の単位は「文」  
> ・文は一文一文ごとに「実行」される。実行の結果は「副作用」によってのみ表現できる  
> ・副作用とは「世界を汚すこと」。手続き型言語は副作用の連続でプログラムが進行していく  
> ・汚せる範囲を「スコープ」と呼ぶ  
> ・関数型言語の単位は「式」  
> ・式は「評価」され、「値」（戻り値）を返す  
> ・「式」の評価結果は本来「戻り値」のみであるが、関数型言語の種類によっては副作用を起こすこともできる（関数型言語でも戻り値を無視して手続き型言語のように副作用の連続でプログラムを書くこともできる）  
> ・いっぽう副作用を起こさず式の戻り値のみでプログラムを書く純粋関数型言語というものもある  
> ・別に純粋関数型言語がエライと言いたいわけじゃないけど、「その処理が世界を汚していないか」を意識してプログラムを書くことはとても大事  
> ・ちなみに Python では評価 (eval) と実行 (exec) で分かれていて、eval は戻り値を返すけど exec は戻り値を返さないといった感じで式と文が明確に分かれている  
> 参照（https://github.com/rubima/rubima/issues/66）  
 
### 注意
・コンパイラ：ソース言語で書かれたプログラムを、目的の言語に変換する変換プログラム  
・必ずしも対象がアセンブラにかぎらないことに注意！  
・構文解析が正しく行われるかは出力される構文木（XMLファイル）で確認  

### 感想
・手続き型言語は副作用がメインということなのだろうか？ この辺りは今後勉強しないと...  
・compilation_engine処理はキーワード・シンボル処理だけどもまとめてしまえば、一気に綺麗に書けそう。書き直さないけど  
・頑張ったけど頑張った過程がそのままコードになってる。「木を見て森を見ず」という状態がよく分かる  



 

